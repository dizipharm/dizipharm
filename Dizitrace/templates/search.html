{% extends 'base_admin_dashboard.html' %}
{%block content%}
{%load static%}
<style media="screen">
  #experience { color:blue }
  /* .row{background: url("http://vikingpacking.com/files/2017/06/Freight.jpg") no-repeat center center fixed;+moz-opacity: 0.9;+khtml-opacity: 0.9;opacity: 0.9;} */
  .dis{display:none}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

                <script type="text/javascript">


                $( document ).ready(function() {
                  $('#identification_table').on("click",".viewdetailsid2",function(){

                    $(".palletitemid").hide();
                    $(".caseitemid").hide();
                      var status=$("#status_type").val();

    if(status == "PALLET"){
      $(".palletitemid").show();
      $(".caseitemid").hide();


    }
    else{
      $("#mt2").show();
      $(".palletitemid").hide();
     // $('.caseitemid').addClass("active");
      // $("#mt1").removeClass("active");
     // $('#mt4').addClass("active")
     // $('#mt3').addClass("active")
     // $('#mt6').addClass("active")
      // $(".caseitemid").show();
    }
});




});


function myFunction() {
  let text;
  let person = prompt("Recall Comment:");
  if (person == null || person == "") {
    text = "User cancelled the prompt.";
  } else {
    text = "Hello " + person ;
  }
  document.getElementById("demo").innerHTML = text;
}



                </script>
<div class="row">

               <div class="col-12 mt-4">
                 <ul class="nav nav-tabs border-0" id="myTab" role="tablist">
                   <li class="nav-item" role="presentation">
                     <button class="nav-link active" id="tp1-tab" data-bs-toggle="tab" data-bs-target="#tp1" type="button" role="tab" aria-controls="tp1" aria-selected="true"><i class="bi bi-shuffle" data-bs-toggle="tooltip" data-bs-placement="top" title="Track"></i></button>
                   </li>

                 </ul>
                 <div class="tab-content border bg-white" id="myTabContent">
                   <div class="tab-pane fade show p-3 active overflow-auto" id="tp1" role="tabpanel" aria-labelledby="tp1-tab">
                     <div class="d-flex flex-wrap mb-2">

                     <!-- searchBy-start -->
                     <div class="dropdown me-auto sortBtn">
                         <!-- <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                         Search by
                         </button>
                         <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                           <li><a class="dropdown-item" href="#">Product</a></li>
                           <li><a class="dropdown-item" href="#">Location</a></li>
                           <li><a class="dropdown-item" href="#">Owner</a></li>
                           <li><a class="dropdown-item" href="#">Transaction</a></li>
                         </ul> -->
                     </div>
                     <!-- searchBy-end -->
                     <!-- searchBy-end -->

                     <!-- <button type="button" class="btn btn-white me-2"><i class="bi bi-arrow-repeat" data-bs-toggle="tooltip" data-bs-placement="top" title="Refresh"></i></button>
                     <button type="button" class="btn btn-white me-2"><i class="bi bi-printer" data-bs-toggle="tooltip" data-bs-placement="top" title="Print/PDF"></i></button>
                     <button type="button" class="btn btn-white me-2"><i class="bi bi-file-earmark-excel" data-bs-toggle="tooltip" data-bs-placement="top" title="Export XLS"></i></button>
                     <button type="button" class="btn btn-white"><i class="bi bi-box-arrow-in-down" data-bs-toggle="tooltip" data-bs-placement="top" title="Download"></i></button> -->
                     </div>
                     <form class="form-inline ml-auto" id="frmUsers" name="frmUsers" method="GET" action="/search/">
                       <div class="col-md-12 text-center mt-3">
                         <input  class="form-control" type="text" placeholder="Enter SSCC number" aria-label="Search" id=""
                             name="search" style="width:20%" />
                             </div>
                         <div >
                             <button class="button btn  search-btn" type="submit" id="experience">Submit</button>
                     </form>
                     <table class="table tt" id="identification_table">
                       <thead>
                         <tr>
                           <th width="50px"><input type="checkbox"></th>
                           <th class="d-flex border-0">
                           <div class="dropdown">
                             <button class="btn dropdown-toggle cD" type="button" id="db1" data-bs-toggle="dropdown" aria-expanded="false">
                             <i class="bi bi-three-dots-vertical text-white"></i>
                             </button>
                             <ul class="dropdown-menu" aria-labelledby="db1">
                               <li><a class="dropdown-item" href="#" id="viewdetailsid1"><i class="bi bi-eye"></i> View Details</a></li>
                               <li><a class="dropdown-item" href="#"><i class="bi bi-printer"></i> Recall</a></li>
                               <li><a class="dropdown-item" href="#"><i class="bi bi-file-earmark-excel"></i> Export</a></li>
                               <li><a class="dropdown-item" href="#"><i class="bi bi-trash"></i> Delete</a></li>
                             </ul>
                           </div><!-- dropdown-end -->
                           </th>

                           <th style="width: 300px;">SSCC No</th>

                   <th style="width: 300px;">Packaging</th>
                   <!-- <th style="width: 200px;">Pallet Serial No</th> -->
                   <!-- <th style="width: 200px;">Case Serial No</th> -->
                   <th style="width: 300px;">Owner</th>
                   <th style="width: 300px;">Location</th>
                   <th style="width: 300px;">Transaction</th>
                   <th style="width: 300px;">Recall</th>
                         </tr>
                       </thead>

                       <tbody >
        {%for a in result%}
                         <tr>
                           <td class="p-2"><input type="checkbox"></td>
                           <td class="p-2">
                             <div class="dropdown">
                               <button class="btn dropdown-toggle cD" type="button" id="db1" data-bs-toggle="dropdown" aria-expanded="false">
                               <i class="bi bi-three-dots-vertical text-white"></i>
                               </button>
                               <ul class="dropdown-menu identification-dropdown-menu" aria-labelledby="db1">
                                 <!-- <td><a href="/product_info/{{ a.url|slice:'-3:-1' }}"><span class="glyphicon glyphicon-pencil" >View Data</span></a></td> -->
                                 <!-- <li><a class="dropdown-item" href="#Paracetamol" data-bs-toggle="modal"><i class="bi bi-eye"></i> View Details</a></li> -->
                                 <li value="{{a.package_type}}"><a class="dropdown-item viewdetailsid2" href="#Paracetamol" data-bs-toggle="modal"><i class="bi bi-eye"></i> View Details</a></li>
                                 <li><a class="dropdown-item" href="#"><i class="bi bi-printer"></i> Recall</a></li>
                                 <li><a class="dropdown-item" href="#"><i class="bi bi-file-earmark-excel"></i> Export</a></li>
                                 <li><a class="dropdown-item" href="#"><i class="bi bi-trash"></i> Delete</a></li>
                               </ul>
                             </div><!-- dropdown-end -->
                           </td>
                           <td class="p-2">{{a.product_disp.sscc_no}}</td>
                     <td class="p-2">{{a.package_type}}</td>

                     <!-- <td class="p-2">{{a.package_pallet.package_pallet_sn}}</td>
                     <td class="p-2">{{a.package_case.package_case_sn}}</td> -->
                     <td class="p-2">{{a.product_disp.owner.asset_owner_now}}</td>
                    <td class="p-2">{{a.product_disp.location.current_location}}</td>
                    <td class="p-2">{{a.product_disp.order_status}}</td>

                    <td class="p-2"><a href="javascript:myFunction('You clicked!')">{{a.product_disp.recall}}</a></td>

                    <p id="demo"></p>
                         </tr>

        {%endfor%}
                       </tbody>
                       </div>

                     </table>
                     </div><!--tp1-tabpane-end-->







                   <div class="tab-pane fade" id="tp5" role="tabpanel" aria-labelledby="tp5-tab">
                   ....
                   </div><!--tp5-tabpane-end-->

                   <div class="tab-pane fade" id="tp6" role="tabpanel" aria-labelledby="tp6-tab">
                   ....
                   </div><!--tp6-tabpane-end-->

                   <div class="tab-pane fade" id="tp7" role="tabpanel" aria-labelledby="tp7-tab">
                   ....
                   </div><!--tp7-tabpane-end-->

                   <div class="tab-pane fade" id="tp8" role="tabpanel" aria-labelledby="tp8-tab">
                   ....
                   </div><!--tp8-tabpane-end-->

                   <div class="tab-pane fade" id="tp9" role="tabpanel" aria-labelledby="tp9-tab">
                   ....
                   </div><!--tp9-tabpane-end-->

                   <div class="tab-pane fade" id="tp10" role="tabpanel" aria-labelledby="tp10-tab">
                   ....
                   </div><!--tp10-tabpane-end-->

                 </div>
               </div>
               <!--col-end-->
</div>
</div>
               </div>
               <!--row-end-->

             </div><!-- main-end -->

           <!-- </div><!-- container-fluid-end -->

           <!-- footer-start -->
           <!-- <div class="container-fluid p-3 text-center dFooter">
           Powered By: Â© AI DIZITAL, Ltd. All rights reserved.
           </div> -->
           <!-- footer-end -->

           <!-- modals-start-here -->

           <!-- modal-1-start -->
           <div class="modal fade" id="Paracetamol" tabindex="-1" aria-labelledby="ParacetamolLabel" aria-hidden="true">
             <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
               <!-- modal-content-start -->
               <div class="modal-content testing">

               </div>

               <!-- modal-content-end -->
             </div>
           </div>
           <!-- modal-1-end -->

           <!-- modals-end-here -->

               <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
               <script src="{%static "assets/js/jquery-slim.js"%}"></script>
               <script src="{%static "assets/js/datatables.min.js"%}"></script>
               <script>
                 $(document).ready( function () {
                 $('.table').DataTable();
                 // $("#identification_table").DataTable();
                 // $("#identification_table").init();
                 // $('#identification_table>tbody').hide();


             } );


             $(".identification-dropdown-menu li").click(function (){
               var $this = $(this);
               var sscc = $this.attr("value");
               console.log({ sscc })
               var identificationData = {{result | safe}}
               var filteredData = identificationData.filter(function(data) {
                 return data.package_type === sscc;
               })
               var selectedSsccData = filteredData[0];
               var temp = `
               <!-- modal-header-start -->




               <div class="modal-header">
<input type="hidden" name="" value="${selectedSsccData.package_type}" id="status_type">

                 <button type="button" class="btn-close text-white fs-2 mb-2" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x"></i></button>
               </div>
               <!-- modal-header-end -->

               <!-- modal-body-start -->
               <div class="modal-body">

                 <ul class="nav nav-tabs" id="myTab" role="tablist">

                   <li class="nav-item" role="presentation">
                     <div class="palletitemid dis">
                       <button class="nav-link active" id="mt1-tab" data-bs-toggle="tab" data-bs-target="#mt1" type="button" role="tab" aria-controls="mt1" aria-selected="false">Pallet Details</button>

                     </div>

                   </li>


                   <li class="nav-item" role="presentation">
                     <button class="nav-link " id="mt3-tab" data-bs-toggle="tab" data-bs-target="#mt3" type="button" role="tab" aria-controls="mt3" aria-selected="false">Owner Details</button>
                   </li>
                   <li class="nav-item" role="presentation">
                     <button class="nav-link" id="mt4-tab" data-bs-toggle="tab" data-bs-target="#mt4" type="button" role="tab" aria-controls="mt4" aria-selected="false">Location Details</button>
                   </li>

                   <li class="nav-item" role="presentation">
                     <div class="caseitemid">
                    <button class="nav-link" id="mt6-tab" data-bs-toggle="tab" data-bs-target="#mt6" type="button" role="tab" aria-controls="mt6" aria-selected="false">Case Details</button>
                     </div>

                   </li>

                 </ul>

                 <div class="tab-content" id="myTabContent">

                   <div class="tab-pane fade show active" id="mt1" role="tabpanel" aria-labelledby="mt1-tab">

                     <div class="d-flex flex-wrap mb-2">

                       <button type="button" class="btn btn-white ms-lg-auto me-2"><i class="bi bi-arrow-repeat" data-bs-toggle="tooltip" data-bs-placement="top" title="Refresh"></i></button>
                       <button type="button" class="btn btn-white me-2"><i class="bi bi-printer" data-bs-toggle="tooltip" data-bs-placement="top" title="Print/PDF"></i></button>
                       <button type="button" class="btn btn-white me-2"><i class="bi bi-file-earmark-excel" data-bs-toggle="tooltip" data-bs-placement="top" title="Export XLS"></i></button>
                       <button type="button" class="btn btn-white"><i class="bi bi-box-arrow-in-down" data-bs-toggle="tooltip" data-bs-placement="top" title="Download"></i></button>

                     </div>

                   <div class="row">
                   <div class="col-12 col-lg-5 p-3">
                   <img src=${selectedSsccData.pallet_images.image_1} class="border" width="100%"/>
                   </div>
                   <!--col-end-->

                   <div class="col-12 col-lg-7 p-3" style="overflow-x:auto;">
                     <table class="border" width="100%">
                       <tr>
                         <td class="p-2">Pallet Serial No</td>
                         <td class="p-2">: ${selectedSsccData.package_pallet_sn}</td>
                       </tr>
                       <tr>
                         <td class="p-2">SSCC No</td>
                         <td class="p-2">: ${selectedSsccData.product_disp.sscc_no}</td>
                       </tr>


                       <tr>
                         <td class="p-2">Container Dimensions  (LxBxH)</td>
                         <td class="p-2">: ${selectedSsccData.product_disp.container_dimensions}</td>
                       </tr>
                       <tr>
                         <td class="p-1">Pallet Dimensions  (LxBxH)</td>
                         <td class="p-2">: ${selectedSsccData.product_disp.package_dimentions}</td>
                       </tr>
                       <tr>
                         <td class="p-2">Pallet Gross Weight</td>
                         <td class="p-2">: ${selectedSsccData.product_disp.package_gross_weight}</td>
                       </tr>

                       <tr>
                         <td class="p-1">Pallet Net Weight</td>
                         <td class="p-2">: ${selectedSsccData.product_disp.package_net_weight}</td>
                       </tr>
                       <tr>
                         <td class="p-2">No of Cases in a Pallet</td>
                         <td class="p-2">: ${selectedSsccData.product_disp.package_inside_units}</td>
                       </tr>
                       <tr>
                         <td class="p-2">Case Serial Numbers in Pallet</td>
                         <td class="p-2">: ${selectedSsccData.case_numbers}</td>
                       </tr>
                         <tr>
                             <td class="p-2">Total Sellable Units in a Pallet </td>
                             <td class="p-2">: ${selectedSsccData.product_disp.package_inside_salable_units}</td>
                           </tr>
                           <tr>
                               <td class="p-2">Recorded Time </td>
                               <td class="p-2">: ${selectedSsccData.product_disp.location.recorded_time}</td>
                             </tr>

                     </table>

                     </div>
                     <!--col-end-->
                   </div>
                   <!--row-end-->

                   </div><!--mt1-tab-pane-end-->



                   <div class="tab-pane fade" id="mt3" role="tabpanel" aria-labelledby="mt3-tab">

                     <div class="d-flex flex-wrap mb-2">

                       <button type="button" class="btn btn-white ms-lg-auto me-2"><i class="bi bi-arrow-repeat" data-bs-toggle="tooltip" data-bs-placement="top" title="Refresh"></i></button>
                       <button type="button" class="btn btn-white me-2"><i class="bi bi-printer" data-bs-toggle="tooltip" data-bs-placement="top" title="Print/PDF"></i></button>
                       <button type="button" class="btn btn-white me-2"><i class="bi bi-file-earmark-excel" data-bs-toggle="tooltip" data-bs-placement="top" title="Export XLS"></i></button>
                       <button type="button" class="btn btn-white"><i class="bi bi-box-arrow-in-down" data-bs-toggle="tooltip" data-bs-placement="top" title="Download"></i></button>

                     </div>

                     <div class="row">
                       <div class="col-12 col-lg-5 p-3">

                       </div>
                       <!--col-end-->

                       <div class="col-12 col-lg-7 p-3" style="overflow-x:auto;">

                         <table class="border" width="100%">

                         <thead>
                         <tr>
                         <th class="ps-2 pt-2">
                           <div class="form-check">
                             <input class="form-check-input" type="checkbox">
                           </div>
                         </th>
                         <th class="p-2">Current Owner </th>

                         <th class="p-2">Recorded Time Stamp</th>
                        <th class="p-2">Transaction Time Stamp</th>
                        <th class="p-2">Contact No</th>
                        <th class="p-2">Address</th>
                        <th class="p-2">Next Owner GLN</th>

                         </tr>
                         </thead>

                         <tbody>
                         <tr>
                         <td class="ps-2 pt-2">
                           <div class="form-check">
                             <input class="form-check-input" type="checkbox">
                           </div>
                         </td>
                         <td class="p-2">${selectedSsccData.product_disp.owner.asset_owner_now}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.recorded_time}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.trans_timestmap}</td>
                         <td class="p-2">${selectedSsccData.product_disp.owner.current_owner_contact}</td>
                         <td class="p-2">${selectedSsccData.product_disp.owner.current_owner_address}</td>
                         <td class="p-2">${selectedSsccData.product_disp.dispatch_loc_gln}</td>
                         </tr>

                         </tbody>

                         </table>
                         </div>
                         <!--col-end-->
                       </div>
                       <!--row-end-->

                   </div><!--mt3-tab-pane-end-->


                   <div class="tab-pane fade" id="mt4" role="tabpanel" aria-labelledby="mt4-tab">

                     <div class="d-flex flex-wrap mb-2">

                       <button type="button" class="btn btn-white ms-lg-auto me-2"><i class="bi bi-arrow-repeat" data-bs-toggle="tooltip" data-bs-placement="top" title="Refresh"></i></button>
                       <button type="button" class="btn btn-white me-2"><i class="bi bi-printer" data-bs-toggle="tooltip" data-bs-placement="top" title="Print/PDF"></i></button>
                       <button type="button" class="btn btn-white me-2"><i class="bi bi-file-earmark-excel" data-bs-toggle="tooltip" data-bs-placement="top" title="Export XLS"></i></button>
                       <button type="button" class="btn btn-white"><i class="bi bi-box-arrow-in-down" data-bs-toggle="tooltip" data-bs-placement="top" title="Download"></i></button>

                     </div>

                     <div class="row">
                       <div class="col-12 col-lg-5 p-3">
                         <img src="{%static "assets/images/download.png"%}" class="border" width="90%"/>
                       </div>
                       <!--col-end-->

                       <div class="col-12 col-lg-7 p-3" style="overflow-x:auto;">

                         <table class="border" width="100%">

                         <thead>
                         <tr>
                         <th class="ps-2 pt-2">
                           <div class="form-check">
                             <input class="form-check-input" type="checkbox">
                           </div>
                         </th>
                         <th class="p-2">Location Name</th>
                         <th class="p-2">Recorded Time Stamp</th>
                         <th class="p-2">Latitude</th>
                        <th class="p-2">Longitude</th>
                        <th class="p-2">Continent</th>
                        <th class="p-2">Country</th>
                        <th class="p-2">Address</th>
                        <th class="p-2">Temperature</th>
                        <th class="p-2">Humidity</th>

                         </tr>
                         </thead>

                         <tbody>
                         <tr>
                         <td class="ps-2 pt-2">
                           <div class="form-check">
                             <input class="form-check-input" type="checkbox">
                           </div>
                         </td>
                         <td class="p-2">${selectedSsccData.product_disp.location.current_location}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.recorded_time}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.latitude}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.longitude}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.continent}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.country}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.address}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.temperature}</td>
                         <td class="p-2">${selectedSsccData.product_disp.location.humidity}</td>
                         </tr>

                         </tbody>

                         </table>
                         </div>
                         <!--col-end-->
                       </div>
                       <!--row-end-->

                   </div><!--mt4-tab-pane-end-->

                   <div class="tab-pane fade" id="mt6" role="tabpanel" aria-labelledby="mt6-tab">

                     <div class="d-flex flex-wrap mb-2">

                       <button type="button" class="btn btn-white ms-lg-auto me-2"><i class="bi bi-arrow-repeat" data-bs-toggle="tooltip" data-bs-placement="top" title="Refresh"></i></button>
                       <button type="button" class="btn btn-white me-2"><i class="bi bi-printer" data-bs-toggle="tooltip" data-bs-placement="top" title="Print/PDF"></i></button>
                       <button type="button" class="btn btn-white me-2"><i class="bi bi-file-earmark-excel" data-bs-toggle="tooltip" data-bs-placement="top" title="Export XLS"></i></button>
                       <button type="button" class="btn btn-white"><i class="bi bi-box-arrow-in-down" data-bs-toggle="tooltip" data-bs-placement="top" title="Download"></i></button>

                     </div>

                     <div class="row">
                       <div class="col-12 col-lg-5 p-3">
                       <img src="{%static "assets/images/download.png"%}" class="border" width="90%"/>
                       </div>
                       <!--col-end-->

                       <div class="col-12 col-lg-7 p-3" style="overflow-x:auto;">

                         <table class="border" width="100%">

                         <thead>
                         <tr>
                         <th class="ps-2 pt-2">
                           <div class="form-check">
                             <input class="form-check-input" type="checkbox">
                           </div>
                         </th>
                         <th class="p-2">Serial No </th>
                         <th class="p-2">Package Id</th>
                         <th class="p-2">Package Type</th>
                        <th class="p-2">Inner Package Count</th>
                        <th class="p-2">GTIN No</th>
                         </tr>
                         </thead>

                         <tbody>
                         <tr>
                         <td class="ps-2 pt-2">
                           <div class="form-check">
                             <input class="form-check-input" type="checkbox">
                           </div>
                         </td>
                         <td class="p-2">${selectedSsccData}</td>
                         <td class="p-2">${selectedSsccData}</td>
                         <td class="p-2">${selectedSsccData}</td>
                         <td class="p-2">${selectedSsccData}</td>
                         <td class="p-2">${selectedSsccData}</td>

                         </tr>

                         </tbody>

                         </table>
                         </div>
                         <!--col-end-->
                       </div>
                       <!--row-end-->

                   </div><!--mt6-tab-pane-end-->


                 </div>
                 <!--tabs-ends-here-->

               </div>
               <!-- modal-body-end -->
               `;
               $(".testing").html(temp);

             })









                 </script>
               <script src="{%static "assets/js/custom.js"%}"></script>

             </body>


{%endblock%}
